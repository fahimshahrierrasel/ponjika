{"version":3,"file":"index.js","sources":["../src/index.ts"],"sourcesContent":["interface IDateBengaliNumeral {\n  bnYear: string;\n  bnMonth: string;\n  bnDate: string;\n}\n\ninterface IDateNumeral {\n  year: number;\n  month: number;\n  date: number;\n}\n\ninterface IPonjika {\n  year: number;\n  month: number;\n  date: number;\n  bnYear: string;\n  bnMonthNo: string;\n  bnDate: string;\n  bnMonth: string;\n  bnDay: string;\n  season: string;\n  bnMonthPhn: string;\n  bnDayPhn: string;\n  seasonPhn: string;\n}\n\ninterface IObjType {\n  [key: string]: string;\n}\n\nexport function enToBnNumber(src: number, prefixZero: boolean = false): string {\n  const bdNumObj: { [key: string]: string } = {\n    \"1\": \"১\",\n    \"2\": \"২\",\n    \"3\": \"৩\",\n    \"4\": \"৪\",\n    \"5\": \"৫\",\n    \"6\": \"৬\",\n    \"7\": \"৭\",\n    \"8\": \"৮\",\n    \"9\": \"৯\",\n    \"0\": \"০\",\n  };\n\n  const numStrArr = src.toString().split(\"\");\n\n  numStrArr.forEach((digit, index) => {\n    numStrArr[index] = bdNumObj[digit];\n  });\n\n  const bdNum = numStrArr.join(\"\");\n\n  if (prefixZero && bdNum.length === 1) {\n    return bdNumObj[\"0\"] + bdNum;\n  }\n  return bdNum;\n}\n\nexport class Ponjika {\n  private _bengliMonths: IObjType = {\n    Poush: \"পৌষ\",\n    Maagh: \"মাঘ\",\n    Falgun: \"ফাল্গুন\",\n    Chaitra: \"চৈত্র\",\n    Boisakh: \"বৈশাখ\",\n    Joistho: \"জ্যৈষ্ঠ\",\n    Ashar: \"আষাঢ়\",\n    Shraban: \"শ্রাবণ\",\n    Vadro: \"ভাদ্র\",\n    Ashin: \"আশ্বিন\",\n    Kartik: \"কার্তিক\",\n    Agrahan: \"অগ্রহায়ণ\",\n  };\n\n  private _bengaliWeekDays: IObjType = {\n    Robibar: \"রবিবার\",\n    Sombar: \"সোমবার\",\n    Mongolbar: \"মঙ্গলবার\",\n    Budhbar: \"বুধবার\",\n    Brihospotibar: \"বৃহস্পতিবার\",\n    Shukrobar: \"শুক্রবার\",\n    Shonibar: \"শনিবার\",\n  };\n\n  private _bengliSeasons: IObjType = {\n    Sheet: \"শীত\",\n    Bosonto: \"বসন্ত\",\n    Grismo: \"গ্রীষ্ম\",\n    Borsha: \"বর্ষা\",\n    Sorot: \"শরৎ\",\n    Hemonto: \"হেমন্ত\",\n  };\n\n  private _bengliMonthNo = [9, 10, 11, 12, 1, 2, 3, 4, 5, 6, 7, 8];\n  private _totalDaysInMonth = [30, 30, 29, 30, 31, 31, 31, 31, 31, 31, 30, 30];\n  private _midMonthDate = [14, 13, 14, 13, 14, 14, 15, 15, 15, 16, 15, 15];\n  private _lastMonthIndex = 3;\n  private _leapYearMonthIndex = 2;\n\n  private _refDate: Date;\n  private _bnPrefixZero: boolean;\n  private _date: number = 0;\n  private _month: number = 0;\n  private _year: number = 0;\n  private _bnYear: string = \"\";\n  private _bnMonth: string = \"\";\n  private _bnMonthNo: string = \"\";\n  private _bnDate: string = \"\";\n  private _bnDay: string = \"\";\n  private _season: string = \"\";\n\n  constructor(src: Date = new Date(), bnPrefixZero: boolean = true) {\n    this._refDate = src;\n    this._bnPrefixZero = bnPrefixZero;\n    this._getBengaliDate();\n  }\n\n  private _isLeapYear = (year: number): boolean => {\n    return (year % 4 === 0 && year % 100 !== 0) || year % 400 === 0;\n  };\n\n  private _toBDTimezone = (src: Date): Date => {\n    const bdEnString = src.toLocaleString(\"en\", {\n      timeZone: \"Asia/Dhaka\",\n    });\n    return new Date(bdEnString);\n  };\n\n  private _getDateMonthYear = (src: Date = this._refDate) => {\n    const year = src.getFullYear();\n    const month = src.getMonth();\n    const date = src.getDate();\n\n    return { date, month, year };\n  };\n\n  private _gregorianToBengaliYear = (\n    year: number,\n    month: number,\n    date: number\n  ): number => {\n    // Gregorian Year - 594 Ex. 2022 - 594 = 1428\n    let bengaliYear = year - 594;\n\n    if (\n      month > this._lastMonthIndex ||\n      (month === this._lastMonthIndex && date > 13)\n    ) {\n      bengaliYear = bengaliYear + 1;\n    }\n    return bengaliYear;\n  };\n\n  private _getBengaliDate = (src: Date = this._refDate) => {\n    const bdDate = this._toBDTimezone(src);\n    const { date, month, year } = this._getDateMonthYear(bdDate);\n    const bengaliYear = this._gregorianToBengaliYear(year, month, date);\n\n    let monthDays = this._totalDaysInMonth[month];\n    let bengaliDate = 0;\n    let bengaliMonth = \"\";\n    let bengaliMonthIndex = 0;\n\n    if (date <= this._midMonthDate[month]) {\n      if (month === this._leapYearMonthIndex && this._isLeapYear(year)) {\n        monthDays = this._totalDaysInMonth[month] + 1;\n      }\n      bengaliDate = monthDays + date - this._midMonthDate[month];\n      bengaliMonthIndex = month;\n      bengaliMonth = Object.keys(this._bengliMonths)[bengaliMonthIndex];\n    } else {\n      bengaliDate = date - this._midMonthDate[month];\n      bengaliMonthIndex = (month + 1) % 12;\n      bengaliMonth = Object.keys(this._bengliMonths)[bengaliMonthIndex];\n    }\n    const bengaliSeason = Object.keys(this._bengliSeasons)[\n      Math.floor(bengaliMonthIndex / 2)\n    ];\n\n    this._year = bengaliYear;\n    this._date = bengaliDate;\n    this._month = this._bengliMonthNo[bengaliMonthIndex];\n    this._bnYear = enToBnNumber(bengaliYear, this._bnPrefixZero);\n    this._bnMonth = bengaliMonth;\n    this._bnMonthNo = enToBnNumber(\n      this._bengliMonthNo[bengaliMonthIndex],\n      this._bnPrefixZero\n    );\n    this._bnDate = enToBnNumber(bengaliDate, this._bnPrefixZero);\n    this._bnDay = Object.keys(this._bengaliWeekDays)[bdDate.getDay()];\n    this._season = bengaliSeason;\n  };\n\n  getBengaliDate = (): string => {\n    return `${this._bengaliWeekDays[this._bnDay]}, ${this._bnDate} ${\n      this._bengliMonths[this._bnMonth]\n    } ${this._bnYear}`;\n  };\n\n  getBengaliPhoneticDate = (): string => {\n    return `${this._bnDay}, ${this._date} ${this._bnMonth} ${this._year}`;\n  };\n\n  getDateBengaliNumeral = (): IDateBengaliNumeral => {\n    return {\n      bnDate: this._bnDate,\n      bnMonth: this._bnMonthNo,\n      bnYear: this._bnYear,\n    } as IDateBengaliNumeral;\n  };\n\n  getDateNumeral = (): IDateNumeral => {\n    return {\n      year: this._year,\n      month: this._month,\n      date: this._date,\n    } as IDateNumeral;\n  };\n\n  getDetails = (): IPonjika => {\n    return {\n      year: this._year,\n      month: this._month,\n      date: this._date,\n      bnYear: this._bnYear,\n      bnMonthNo: this._bnMonthNo,\n      bnDate: this._bnDate,\n      bnMonth: this._bengliMonths[this._bnMonth],\n      bnDay: this._bengaliWeekDays[this._bnDay],\n      season: this._bengliSeasons[this._season],\n      bnMonthPhn: this._bnMonth,\n      bnDayPhn: this._bnDay,\n      seasonPhn: this._season,\n    } as IPonjika;\n  };\n}\n"],"names":["enToBnNumber","src","prefixZero","bdNumObj","numStrArr","toString","split","forEach","digit","index","bdNum","join","length","constructor","Date","bnPrefixZero","this","_bengliMonths","Poush","Maagh","Falgun","Chaitra","Boisakh","Joistho","Ashar","Shraban","Vadro","Ashin","Kartik","Agrahan","_bengaliWeekDays","Robibar","Sombar","Mongolbar","Budhbar","Brihospotibar","Shukrobar","Shonibar","_bengliSeasons","Sheet","Bosonto","Grismo","Borsha","Sorot","Hemonto","_bengliMonthNo","_totalDaysInMonth","_midMonthDate","_lastMonthIndex","_leapYearMonthIndex","_date","_month","_year","_bnYear","_bnMonth","_bnMonthNo","_bnDate","_bnDay","_season","_isLeapYear","year","_toBDTimezone","bdEnString","toLocaleString","timeZone","_getDateMonthYear","_refDate","getFullYear","month","getMonth","date","getDate","_gregorianToBengaliYear","bengaliYear","_getBengaliDate","bdDate","monthDays","bengaliDate","bengaliMonth","bengaliMonthIndex","Object","keys","bengaliSeason","Math","floor","_bnPrefixZero","getDay","getBengaliDate","getBengaliPhoneticDate","getDateBengaliNumeral","bnDate","bnMonth","bnYear","getDateNumeral","getDetails","bnMonthNo","bnDay","season","bnMonthPhn","bnDayPhn","seasonPhn"],"mappings":"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"}