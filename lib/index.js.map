{"version":3,"file":"index.js","sources":["../src/index.ts"],"sourcesContent":["interface IDateBengaliNumeral {\n  bnYear: string;\n  bnMonth: string;\n  bnDate: string;\n}\n\ninterface IDateNumeral {\n  year: number;\n  month: number;\n  date: number;\n}\n\ninterface IPonjika {\n  year: number;\n  month: number;\n  date: number;\n  bnYear: string;\n  bnMonthNo: string;\n  bnDate: string;\n  bnMonth: string;\n  bnDay: string;\n  season: string;\n  bnMonthPhn: string;\n  bnDayPhn: string;\n  seasonPhn: string;\n}\n\ninterface IObjType {\n  [key: string]: string;\n}\n\nexport function enToBnNumber(src: number, prefixZero: boolean = false): string {\n  const bdNumObj: { [key: string]: string } = {\n    \"1\": \"১\",\n    \"2\": \"২\",\n    \"3\": \"৩\",\n    \"4\": \"৪\",\n    \"5\": \"৫\",\n    \"6\": \"৬\",\n    \"7\": \"৭\",\n    \"8\": \"৮\",\n    \"9\": \"৯\",\n    \"0\": \"০\",\n  };\n\n  const numStrArr = src.toString().split(\"\");\n\n  numStrArr.forEach((digit, index) => {\n    numStrArr[index] = bdNumObj[digit];\n  });\n\n  const bdNum = numStrArr.join(\"\");\n\n  if (prefixZero && bdNum.length === 1) {\n    return bdNumObj[\"0\"] + bdNum;\n  }\n  return bdNum;\n}\n\nexport class Ponjika {\n  private _bengliMonths: IObjType = {\n    Poush: \"পৌষ\",\n    Maagh: \"মাঘ\",\n    Falgun: \"ফাল্গুন\",\n    Chaitra: \"চৈত্র\",\n    Boisakh: \"বৈশাখ\",\n    Joistho: \"জ্যৈষ্ঠ\",\n    Ashar: \"আষাঢ়\",\n    Shraban: \"শ্রাবণ\",\n    Vadro: \"ভাদ্র\",\n    Ashin: \"আশ্বিন\",\n    Kartik: \"কার্তিক\",\n    Agrahan: \"অগ্রহায়ণ\",\n  };\n\n  private _bengaliWeekDays: IObjType = {\n    Robibar: \"রবিবার\",\n    Sombar: \"সোমবার\",\n    Mongolbar: \"মঙ্গলবার\",\n    Budhbar: \"বুধবার\",\n    Brihospotibar: \"বৃহস্পতিবার\",\n    Shukrobar: \"শুক্রবার\",\n    Shonibar: \"শনিবার\",\n  };\n\n  private _bengliSeasons: IObjType = {\n    Sheet: \"শীত\",\n    Bosonto: \"বসন্ত\",\n    Grismo: \"গ্রীষ্ম\",\n    Borsha: \"বর্ষা\",\n    Sorot: \"শরৎ\",\n    Hemonto: \"হেমন্ত\",\n  };\n\n  private _bengliMonthNo = [9, 10, 11, 12, 1, 2, 3, 4, 5, 6, 7, 8];\n  private _totalDaysInMonth = [30, 30, 29, 30, 31, 31, 31, 31, 31, 31, 30, 30];\n  private _midMonthDate = [14, 13, 14, 13, 14, 14, 15, 15, 15, 16, 15, 15];\n  private _lastMonthIndex = 3;\n  private _leapYearMonthIndex = 2;\n\n  private _refDate: Date;\n  private _bnPrefixZero: boolean;\n  private _date: number = 0;\n  private _month: number = 0;\n  private _year: number = 0;\n  private _bnYear: string = \"\";\n  private _bnMonth: string = \"\";\n  private _bnMonthNo: string = \"\";\n  private _bnDate: string = \"\";\n  private _bnDay: string = \"\";\n  private _season: string = \"\";\n\n  constructor(src: Date = new Date(), bnPrefixZero: boolean = true) {\n    this._refDate = src;\n    this._bnPrefixZero = bnPrefixZero;\n    this._getBengaliDate();\n  }\n\n  private _isLeapYear = (year: number): boolean => {\n    return (year % 4 === 0 && year % 100 !== 0) || year % 400 === 0;\n  };\n\n  private _toBDTimezone = (src: Date): Date => {\n    const bdEnString = src.toLocaleString(\"en\", {\n      timeZone: \"Asia/Dhaka\",\n    });\n    return new Date(bdEnString);\n  };\n\n  private _getDateMonthYear = (src: Date = this._refDate) => {\n    const year = src.getFullYear();\n    const month = src.getMonth();\n    const date = src.getDate();\n\n    return { date, month, year };\n  };\n\n  private _gregorianToBengaliYear = (\n    year: number,\n    month: number,\n    date: number\n  ): number => {\n    // Gregorian Year - 594 Ex. 2022 - 594 = 1428\n    let bengaliYear = year - 594;\n\n    if (\n      month > this._lastMonthIndex ||\n      (month === this._lastMonthIndex && date > 13)\n    ) {\n      bengaliYear = bengaliYear + 1;\n    }\n    return bengaliYear;\n  };\n\n  private _getBengaliDate = (src: Date = this._refDate) => {\n    const bdDate = this._toBDTimezone(src);\n    const { date, month, year } = this._getDateMonthYear(bdDate);\n    const bengaliYear = this._gregorianToBengaliYear(year, month, date);\n\n    let monthDays = this._totalDaysInMonth[month];\n    let bengaliDate = 0;\n    let bengaliMonth = \"\";\n    let bengaliMonthIndex = 0;\n\n    if (date <= this._midMonthDate[month]) {\n      if (month === this._leapYearMonthIndex && this._isLeapYear(year)) {\n        monthDays = this._totalDaysInMonth[month] + 1;\n      }\n      bengaliDate = monthDays + date - this._midMonthDate[month];\n      bengaliMonthIndex = month;\n      bengaliMonth = Object.keys(this._bengliMonths)[bengaliMonthIndex];\n    } else {\n      bengaliDate = date - this._midMonthDate[month];\n      bengaliMonthIndex = (month + 1) % 12;\n      bengaliMonth = Object.keys(this._bengliMonths)[bengaliMonthIndex];\n    }\n    const bengaliSeason = Object.keys(this._bengliSeasons)[\n      Math.floor(bengaliMonthIndex / 2)\n    ];\n\n    this._year = bengaliYear;\n    this._date = bengaliDate;\n    this._month = this._bengliMonthNo[bengaliMonthIndex];\n    this._bnYear = enToBnNumber(bengaliYear, this._bnPrefixZero);\n    this._bnMonth = bengaliMonth;\n    this._bnMonthNo = enToBnNumber(\n      this._bengliMonthNo[bengaliMonthIndex],\n      this._bnPrefixZero\n    );\n    this._bnDate = enToBnNumber(bengaliDate, this._bnPrefixZero);\n    this._bnDay = Object.keys(this._bengaliWeekDays)[bdDate.getDay()];\n    this._season = bengaliSeason;\n  };\n\n  getBengaliDate = (): string => {\n    return `${this._bengaliWeekDays[this._bnDay]}, ${this._bnDate} ${\n      this._bengliMonths[this._bnMonth]\n    } ${this._bnYear}`;\n  };\n\n  getBengaliPhoneticDate = (): string => {\n    return `${this._bnDay}, ${this._date} ${this._bnMonth} ${this._year}`;\n  };\n\n  getDateBengaliNumeral = (): IDateBengaliNumeral => {\n    return {\n      bnDate: this._bnDate,\n      bnMonth: this._bnMonthNo,\n      bnYear: this._bnYear,\n    } as IDateBengaliNumeral;\n  };\n\n  getDateNumeral = (): IDateNumeral => {\n    return {\n      year: this._year,\n      month: this._month,\n      date: this._date,\n    } as IDateNumeral;\n  };\n\n  getDetails = (): IPonjika => {\n    return {\n      year: this._year,\n      month: this._month,\n      date: this._date,\n      bnYear: this._bnYear,\n      bnMonthNo: this._bnMonthNo,\n      bnDate: this._bnDate,\n      bnMonth: this._bengliMonths[this._bnMonth],\n      bnDay: this._bengaliWeekDays[this._bnDay],\n      season: this._bengliSeasons[this._season],\n      bnMonthPhn: this._bnMonth,\n      bnDayPhn: this._bnDay,\n      seasonPhn: this._season,\n    } as IPonjika;\n  };\n}\n"],"names":["enToBnNumber","src","prefixZero","bdNumObj","numStrArr","toString","split","forEach","digit","index","bdNum","join","length","Ponjika","bnPrefixZero","Date","_this","this","_bengliMonths","Poush","Maagh","Falgun","Chaitra","Boisakh","Joistho","Ashar","Shraban","Vadro","Ashin","Kartik","Agrahan","_bengaliWeekDays","Robibar","Sombar","Mongolbar","Budhbar","Brihospotibar","Shukrobar","Shonibar","_bengliSeasons","Sheet","Bosonto","Grismo","Borsha","Sorot","Hemonto","_bengliMonthNo","_totalDaysInMonth","_midMonthDate","_lastMonthIndex","_leapYearMonthIndex","_date","_month","_year","_bnYear","_bnMonth","_bnMonthNo","_bnDate","_bnDay","_season","_isLeapYear","year","_toBDTimezone","bdEnString","toLocaleString","timeZone","_getDateMonthYear","_refDate","getFullYear","month","getMonth","date","getDate","_gregorianToBengaliYear","bengaliYear","_getBengaliDate","bdDate","_a","monthDays","bengaliDate","bengaliMonth","bengaliMonthIndex","Object","keys","bengaliSeason","Math","floor","_bnPrefixZero","getDay","getBengaliDate","concat","getBengaliPhoneticDate","getDateBengaliNumeral","bnDate","bnMonth","bnYear","getDateNumeral","getDetails","bnMonthNo","bnDay","season","bnMonthPhn","bnDayPhn","seasonPhn"],"mappings":"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"}